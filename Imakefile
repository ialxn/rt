#CCOPTIONS= -g -pedantic -Wall -W -Wmissing-prototypes -Wstrict-prototypes -Wconversion -Wshadow -Wpointer-arith -Wcast-qual -Wcast-align -Wwrite-strings -fshort-enums -Wnested-externs
CCOPTIONS= -g -O0 -pedantic -Wall -W -Wmissing-prototypes -Wstrict-prototypes -Wconversion -Wshadow -Wpointer-arith -Wcast-qual -Wcast-align -Wwrite-strings -fshort-enums  -Wnested-externs
#CCOPTIONS= -pg -pedantic -Wall -W -Wmissing-prototypes -Wstrict-prototypes -Wconversion -Wshadow -Wpointer-arith -Wcast-qual -Wcast-align -Wwrite-strings -fshort-enums -Wnested-externs

SRCS= main.c \
      io_utils.c \
      obj_lists.c \
      sources.c \
      targets.c \
      source_uniform_point_source.c \
      source_spot.c \
      source_sphere.c \
      target_plane_screen.c \
      target_rectangle.c \
      target_triangle.c \
      target_ellipsoid.c \
      target_annulus.c \
      target_disk.c \
      off.c \
      math_utils.c \
      reflect.c

OBJ= main.o \
     io_utils.o \
     obj_lists.o \
     sources.o \
     targets.o \
     source_uniform_point_source.o \
     source_spot.o \
     source_sphere.o \
     target_plane_screen.o \
     target_rectangle.o \
     target_triangle.o \
     target_ellipsoid.o \
     target_annulus.o \
     target_disk.o \
     off.o \
     math_utils.o \
     reflect.o

SRC_SPECTRUM= spectrum.c \
              io_utils.c \
              math_utils.c
OBJ_SPECTRUM= spectrum.o \
              io_utils.o \
              math_utils.o

SRC_FLUX= flux_2D.c \
          io_utils.c \
          math_utils.c
OBJ_FLUX= flux_2D.o \
          io_utils.o \
          math_utils.o


SRC_GET_FLUX= get_flux.c \
              io_utils.c \
              math_utils.c
OBJ_GET_FLUX= get_flux.o \
              io_utils.o \
              math_utils.o

LIBS= -lgsl -lgslcblas -lconfig -lm -lpthread
#LIBS= -lgsl -lcblas -latlas -lconfig -lm -lpthread
#LIBS-SEMISTATIC= -Wl,-Bstatic -lgsl -lgslcblas -lconfig -Wl,-Bdynamic -lm -lpthread

AllTarget(rt spectrum flux_2D get_flux)
#NormalProgramTarget(rt,$(OBJ),NullParameter,NullParameter, $(LIBS))
NormalProgramTarget(rt-semistatic,$(OBJ),NullParameter,NullParameter, $(LIBS-SEMISTATIC))
NormalProgramTarget(spectrum,$(OBJ_SPECTRUM),NullParameter,NullParameter, $(LIBS))
NormalProgramTarget(flux_2D,$(OBJ_FLUX),NullParameter,NullParameter, $(LIBS))
NormalProgramTarget(get_flux,$(OBJ_GET_FLUX),NullParameter,NullParameter, $(LIBS))
DependTarget()
